(function(e){function t(t){function r(t,r){console.log("open");e(t).removeClass("closed").addClass("open").animate({fontSize:n.fontOpen},n.baseSpeed);e(r).show(n.speed*n.baseSpeed)}function i(t,r){e(t).animate({fontSize:n.fontClosed},0).removeClass("open").addClass("closed");e(r).hide(n.speed*n.baseSpeed)}var n={timelineContainer:t["timelineContainer"]||"#timeline",timelineSection:t["timelineSection"]||".timeline-wrapper",timelineSectionMarker:t["timelineSectionMarker"]||".timeline-year",timelineTriggerContainer:t["timelineTriggerContainer"]||".timeline-event",timelineTriggerAnchor:t["timelineTriggerAnchor"]||"a",timelineEXContent:t["timelineEXContent"]||".timeline-event-ex",EXContentIdSuffix:t["timelineEXContentSuffix"]||"EX",oneOpen:t["oneOpen"]||false,startState:t["startState"]||"closed",startOpen:t["startOpen"]||[],baseSpeed:t["baseSpeed"]||200,speed:t["speed"]||4,fontOpen:t["fontOpen"]||"1.2em",fontClosed:t["fontClosed"]||"1em",expandAllText:t["expandAllText"]||"+ expand all",collapseAllText:t["collapseAllText"]||"- collapse all"};if(e(n.timelineContainer).data("started")){return}else{e(n.timelineContainer).data("started",true);e(n.timelineContainer+" "+".timeline-toggle").html(n.expandAllText);e(n.timelineContainer+" "+".collapseAll").html(n.collapseAllText);if(n.startState==="closed"){e(n.timelineContainer+" "+n.timelineEXContent).hide();e.each(e(n.startOpen),function(t,i){r(e(i).find(n.timelineTriggerAnchor),e(i+n.EXContentIdSuffix))})}else{r(e(n.timelineContainer+" "+n.timelineTriggerContainer+" "+n.timelineTriggerAnchor),e(n.timelineContainer+" "+n.timelineEXContent))}e(n.timelineContainer).on("click",n.timelineTriggerContainer+" dt",function(){var t=e(this).attr("id");if(e(this).find(n.timelineTriggerAnchor).is(".open")){i(e(n.timelineTriggerAnchor,this),e("#"+t+n.EXContentIdSuffix))}else{if(n.oneOpen==true){i(e(this).parents(n.timelineContainer).find(n.timelineTriggerAnchor,n.timelineTriggerContainer),e(this).parents(n.timelineContainer).find(n.timelineEXContent))}r(e(n.timelineTriggerAnchor,this),e("#"+t+n.EXContentIdSuffix))}});e(n.timelineContainer).on("click",n.timelineSectionMarker,function(){var t=e(this).parents(n.timelineSection).find(n.timelineTriggerContainer).length;var s=e(this).parents(n.timelineSection).find(".open").length;if(n.oneOpen==true){i(e(this).parents(n.timelineContainer).find(n.timelineTriggerAnchor,n.timelineTriggerContainer),e(this).parents(n.timelineContainer).find(n.timelineEXContent))}if(t>s){r(e(this).parents(n.timelineSection).find(n.timelineTriggerAnchor,n.timelineTriggerContainer),e(this).parents(n.timelineSection).find(n.timelineEXContent))}else{i(e(this).parents(n.timelineSection).find("dl"+n.timelineTriggerContainer+" a"),e(this).parents(n.timelineSection).find(n.timelineEXContent))}});e(n.timelineContainer+" "+".timeline-toggle").click(function(){if(e(this).hasClass("expanded")){i(e(this).parents(n.timelineContainer).find(n.timelineTriggerAnchor,n.timelineTriggerContainer),e(this).parents(n.timelineContainer).find(n.timelineEXContent));e(this).removeClass("expanded").html(n.expandAllText)}else{r(e(this).parents(n.timelineContainer).find(n.timelineTriggerAnchor,n.timelineTriggerContainer),e(this).parents(n.timelineContainer).find(n.timelineEXContent));e(this).addClass("expanded").html(n.collapseAllText)}})}}e.timeliner=function(n){if(e.timeliners==null){e.timeliners={options:[]};e.timeliners.options.push(n)}else{e.timeliners.options.push(n)}e(document).ready(function(){for(var n=0;n<e.timeliners.options.length;n++){t(e.timeliners.options[n])}})};})(jQuery)